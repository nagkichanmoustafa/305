<!DOCTYPE html>
<html lang="en-US">
<SCRIPT LANGUAGE="JavaScript"></SCRIPT>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">

    <style>
        body {
            max-width: 440px;
        }
        
        pre {
            overflow-x: auto;
        }
    </style>
</head>

<body>

    <body>

        <h2 id=title></h2>
        x = <input type=number id=ex value=1 onChange="calculate()"> &emsp;
        <BR> df1 = <input type=number id=df1 value=2 onChange="calculate()"> &emsp;
        <BR>df2 = <input type=number id=df2 value=2 onChange="calculate()"> &emsp;
        <BR>
        <BR>

        <b> <span id=res></span> </b>
        <br><br>
        <hr /> <b>Table</b>
        <pre id=out>
            
        </pre>

        <hr />
        <b>Sample code</b>
        <pre id=sample></pre>

        <hr />

        </p>


        <script>
            function LogGamma(Z) {
                with(Math) {
                    var S = 1 + 76.18009173 / Z - 86.50532033 / (Z + 1) + 24.01409822 / (Z + 2) - 1.231739516 / (Z + 3) + .00120858003 / (Z + 4) - .00000536382 / (Z + 5);
                    var LG = (Z - .5) * log(Z + 4.5) - (Z + 4.5) + log(S * 2.50662827465);
                }
                return LG
            }

            function Betinc(X, A, B) {
                var A0 = 0;
                var B0 = 1;
                var A1 = 1;
                var B1 = 1;
                var M9 = 0;
                var A2 = 0;
                var C9;
                while (Math.abs((A1 - A2) / A1) > .00001) {
                    A2 = A1;
                    C9 = -(A + M9) * (A + B + M9) * X / (A + 2 * M9) / (A + 2 * M9 + 1);
                    A0 = A1 + C9 * A0;
                    B0 = B1 + C9 * B0;
                    M9 = M9 + 1;
                    C9 = M9 * (B - M9) * X / (A + 2 * M9 - 1) / (A + 2 * M9);
                    A1 = A0 + C9 * A1;
                    B1 = B0 + C9 * B1;
                    A0 = A0 / B1;
                    B0 = B0 / B1;
                    A1 = A1 / B1;
                    B1 = 1;
                }
                return A1 / A
            }

            function Betacdf(Z, A, B) {
                var S;
                var BT;
                var Bcdf;
                with(Math) {
                    S = A + B;
                    BT = Math.exp(LogGamma(S) - LogGamma(B) - LogGamma(A) + A * Math.log(Z) + B * Math.log(1 - Z));
                    if (Z < (A + 1) / (S + 2)) {
                        Bcdf = BT * Betinc(Z, A, B)
                    } else {
                        Bcdf = 1 - BT * Betinc(1 - Z, B, A)
                    }
                }
                return Bcdf
            }

            function calculate() {
                let X = eval(ex.value)
                let f1 = eval(df1.value)
                let f2 = eval(df2.value);
                if (f1 <= 0) {
                    alert("Numerator degrees of freedom must be positive")
                } else if (f2 <= 0) {
                    alert("Denominator degrees of freedom must be positive")
                } else if (X <= 0) {
                    Fcdf = 0
                } else {
                    let Z = X / (X + f2 / f1);
                    Fcdf = Betacdf(Z, f1 / 2, f2 / 2);
                }
                Fcdf = Math.round(Fcdf * 100000) / 100000;
                res.innerText = 'F(x,df1,df2) =  ' + Fcdf;
            }


            function doTable() {
                let y;
                const q = [1, 2, 3, 4, 5, 6]
                let a = q.map((df1) => 'df1= ' + df1)
                let str = header(a)
                for (let x = 1; x <= 6; x++) {
                    y += 1;

                    let a = q.map((q) => calculate())
                    str += oneLine(a, x)
                }
                return str
            }

            let header = (a) => '      ' + a.join('   ')
            let oneLine = (a, x) => '\ndf2=' + x + '  ' + a.join(' ')

            title.innerText = "F Distribution"
            sample.innerText = doTable + '\n' + calculate
            calculate()
            out.innerText = doTable()
        </script>

    </body>

</html>